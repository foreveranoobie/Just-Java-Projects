package ua.nure.storozhuk.practice4;

import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

public class Part1 {
	private static final String ENCODING = "Cp1251";

	public static void main(String[] args) {
		String input = readFile("part1.txt");
		Pattern p = Pattern.compile("\\b[A-Za-zÀ-ß¨Ý¯²ªà-ÿº¿¸ý³]{4,}\\b", Pattern.MULTILINE);
		Matcher m = p.matcher(input);
		StringBuilder result = new StringBuilder().append(input);
		while (m.find()) {
			for (int charNum = m.start(); charNum < m.end(); charNum++) {
				if (String.valueOf(result.charAt(charNum))
						.equals(String.valueOf(result.charAt(charNum)).toLowerCase())) {
					result.replace(charNum, charNum + 1, String.valueOf(result.charAt(charNum)).toUpperCase());
				} else {
					result.replace(charNum, charNum + 1, String.valueOf(result.charAt(charNum)).toLowerCase());
				}
			}
		}
		System.out.println(result.toString());
	}

	public static String readFile(String path) {
		String res = null;
		try {
			byte[] bytes = Files.readAllBytes(Paths.get(path));
			res = new String(bytes, ENCODING);
		} catch (IOException ex) {
			ex.printStackTrace();
		}
		return res;
	}

}
